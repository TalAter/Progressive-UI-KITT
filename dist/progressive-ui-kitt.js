/*
<!--
Progressive UI KITT
version : 0.0.1
author  : Tal Ater @TalAter
license : MIT
https://github.com/TalAter/Progressive-UI-KITT
-->
*/

(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.ProgressiveKITT = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_stylesheet,_stylesheetNode,_guiNodes,_debugState=!1,_messages=[],_listenersRegistered=!1,_callbacks={"show-message":[],"show-alert":[],"show-confirm":[],"hide-message":[]},_getMessageElement=function(e){return document.getElementById("progressivekitt-message-"+e)},_logMessage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"font-weight: bold; color: #00f;";_debugState&&(e.indexOf("%c")!==-1||t?console.log(e,t):console.log(e))},_guiCreated=function(){return void 0!==_guiNodes},_updateStylesheet=function(){_stylesheet&&_guiCreated()&&(_stylesheetNode?_stylesheetNode.href=_stylesheet:(_stylesheetNode=document.createElement("link"),_stylesheetNode.rel="stylesheet",_stylesheetNode.href=_stylesheet,_stylesheetNode.id="progressivekitt-style-sheet",document.body.appendChild(_stylesheetNode)))},_createGUI=function(){_guiNodes=document.createElement("div"),_guiNodes.id="progressivekitt-ui",_guiNodes.innerHTML="",_guiNodes.style.display="none",document.body.appendChild(_guiNodes),_updateStylesheet()},_addMessage=function(e,t){if(_guiCreated()&&"string"==typeof e){t=t||{},"object"!==("undefined"==typeof t?"undefined":_typeof(t))&&_logMessage("Invalid options object");for(var s=_messages.length+Date.now(),o=arguments.length,n=Array(o>2?o-2:0),a=2;a<o;a++)n[a-2]=arguments[a];n.forEach(function(t,o){t&&(e+='<span class="progressivekitt-button" id="progressivekitt-button-'+o+"-"+s+'">'+t.label+"</span>")});var i=document.createElement("div");i.id="progressivekitt-message-"+s,i.innerHTML=e,i.classList.add("progressivekitt-message"),t.class&&i.classList.add(t.class.toString());var r={id:s,contents:e};return _messages.push(r),_guiNodes.appendChild(i),n.forEach(function(e,t){if(e){var o=function(){e.cb&&e.cb.apply(e.context),ProgressiveKITT.deleteMessage(s)};document.getElementById("progressivekitt-button-"+t+"-"+s).addEventListener("click",o,!1)}}),setTimeout(function(){i.classList.add("progressivekitt-message--shown")},20),isFinite(t.hideAfter)&&t.hideAfter>0&&setTimeout(function(){ProgressiveKITT.deleteMessage(s)},t.hideAfter),s}},_messageListener=function(e){var t=e.data;if("object"===("undefined"==typeof t?"undefined":_typeof(t))){var s=t.payload;switch(t.action){case"pkitt-message":ProgressiveKITT.addMessage(s.contents,s.options);break;case"pkitt-alert":ProgressiveKITT.addAlert(s.contents,s.button.label,s.options);break;case"pkitt-confirm":ProgressiveKITT.addConfirm(s.contents,s.button1.label,s.button2.label,s.options)}}},_registerListeners=function(){_listenersRegistered||"serviceWorker"in navigator&&(navigator.serviceWorker.addEventListener("message",_messageListener),_listenersRegistered=!0)},_deleteMessageFromDOM=function(e){var t=_getMessageElement(e);t.classList.remove("progressivekitt-message--shown"),setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},1e3)},_invokeCallbacks=function(e){for(var t=arguments.length,s=Array(t>1?t-1:0),o=1;o<t;o++)s[o-1]=arguments[o];_callbacks[e].forEach(function(e){e.callback.apply(e.context,s)})},_parseButtonObject=function(e){var t="string"==typeof e?{label:e}:e;return t.context||(t.context=this),t},vroom=function(){this.render()},render=function(){_registerListeners(),_guiCreated()||_createGUI()},setStylesheet=function(e){_stylesheet=e,_updateStylesheet()},deleteMessages=function(){for(var e;void 0!==(e=_messages.shift());)_deleteMessageFromDOM(e.id)},deleteMessage=function(e){var t=_messages.filter(function(t){return t.id!==e});return t.length===_messages.length?void _logMessage("deleteMessage() did not find the message with the id",e):(_messages=t,_invokeCallbacks("hide-message"),void _deleteMessageFromDOM(e))},addMessage=function(e,t){var s=_addMessage(e,t);return _invokeCallbacks("show-message",_getMessageElement(s)),s},addAlert=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"OK",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;t=_parseButtonObject(t);var o=_addMessage(e,s,{label:t.label,cb:t.callback,context:t.context});return _invokeCallbacks("show-alert",_getMessageElement(o)),o},addConfirm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"OK",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Cancel",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;t=_parseButtonObject(t),s=_parseButtonObject(s);var n=_addMessage(e,o,{label:t.label,cb:t.callback,context:t.context},{label:s.label,cb:s.callback,context:s.context});return _invokeCallbacks("show-confirm",_getMessageElement(n)),n},hide=function(){_guiCreated()||_logMessage("cannot hide interface. Must be rendered first"),_guiNodes.classList.add("progressivekitt-ui--hidden")},show=function(){_guiCreated()||_logMessage("cannot show interface. Must be rendered first"),_guiNodes.classList.remove("progressivekitt-ui--hidden")},debug=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];_debugState=!!e},addCallback=function(e,t,s){void 0!==_callbacks[e]&&"function"==typeof t&&_callbacks[e].push({callback:t,context:s||this})},removeCallback=function(e,t){var s=function(e){return e.callback!==t};Object.keys(_callbacks).forEach(function(o){void 0!==e&&e!==o||(void 0===t?_callbacks[o]=[]:_callbacks[o]=_callbacks[o].filter(s))})};module.exports={setStylesheet:setStylesheet,vroom:vroom,render:render,addMessage:addMessage,addAlert:addAlert,addConfirm:addConfirm,deleteMessages:deleteMessages,deleteMessage:deleteMessage,show:show,hide:hide,debug:debug,addCallback:addCallback,removeCallback:removeCallback};
},{}]},{},[1])(1)
});


//# sourceMappingURL=progressive-ui-kitt.js.map